<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An치lisis del Comercio Intraindustrial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: Se ha dise침ado una aplicaci칩n de una sola p치gina con una estructura tem치tica y navegaci칩n fija para facilitar el acceso a la informaci칩n. En lugar de un informe lineal, se utilizan componentes interactivos (sliders, gr치ficos din치micos, pesta침as y tarjetas interactivas) para guiar al usuario desde los conceptos b치sicos (definici칩n, 칤ndices) hasta los m치s complejos (modelos econom칠tricos, desaf칤os). Esta arquitectura centrada en el usuario busca transformar un tema acad칠mico denso en una experiencia de aprendizaje intuitiva y atractiva, permitiendo al usuario explorar los temas en el orden que prefiera y profundizar en los puntos de inter칠s. -->
    <!-- Visualization & Content Choices: 
        1. Diagrama Comparativo (HTML/CSS): Informar -> Diferenciar comercio inter vs. intra -> Diagrama de cajas -> Est치tico -> Claridad visual superior al texto.
        2. 칈ndice GL con Slider y Gr치fico Donut (JS/Chart.js): Informar/Comparar -> Explicar el rango y significado del 칤ndice GL -> Slider interactivo actualizando un gr치fico de donut y texto -> El usuario explora la relaci칩n causa-efecto -> Hace tangible una f칩rmula abstracta.
        3. Determinantes en Gr치fico de Burbujas (Chart.js): Organizar/Informar -> Presentar los factores que impulsan el CII -> Gr치fico de burbujas -> Clic en burbuja para ver detalles -> Visualmente m치s atractivo que una lista y fomenta la exploraci칩n.
        4. Modelos y Desaf칤os en Pesta침as/Tarjetas (HTML/JS): Organizar/Informar -> Separar y explicar problemas t칠cnicos complejos -> Componentes de UI est치ndar (pesta침as, tarjetas clicables) -> Clic para revelar contenido -> Estructura la informaci칩n compleja de forma clara y concisa.
        5. Casos de Estudio en Tarjetas Expandibles (HTML/JS): Informar/Comparar -> Mostrar ejemplos del mundo real -> Tarjetas con bot칩n "Ver m치s" -> Clic para expandir -> Permite al usuario escanear los casos y profundizar solo en los que le interesan.
        Se utilizan Chart.js para gr치ficos en Canvas y HTML/Tailwind/JS para los dem치s elementos interactivos. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7;
            color: #3D3D3D;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #6D8A96;
            border-bottom-color: #6D8A96;
        }
        .card {
            background-color: #FFFFFF;
            border: 1px solid #E5E7EB;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .tab-button {
            transition: all 0.3s;
        }
        .tab-button.active {
            background-color: #6D8A96;
            color: #FFFFFF;
        }
        .problem-card .solution {
            display: none;
        }
        .problem-card.flipped .problem {
            display: none;
        }
        .problem-card.flipped .solution {
            display: block;
        }
        .chart-container {
            position: relative; 
            width: 100%; 
            max-width: 400px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) { 
            .chart-container { 
                height: 350px; 
            } 
        }
    </style>
</head>
<body class="antialiased">

    <header class="sticky top-0 bg-white/80 backdrop-blur-lg shadow-sm z-50">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <h1 class="text-xl md:text-2xl font-bold text-gray-800">Explorador de Comercio Intraindustrial</h1>
                <div class="hidden md:flex space-x-8">
                    <a href="#introduccion" class="nav-link pb-1">Introducci칩n</a>
                    <a href="#indices" class="nav-link pb-1">칈ndices</a>
                    <a href="#determinantes" class="nav-link pb-1">Determinantes</a>
                    <a href="#modelos" class="nav-link pb-1">Modelos</a>
                    <a href="#desafios" class="nav-link pb-1">Desaf칤os</a>
                    <a href="#casos" class="nav-link pb-1">Casos de Estudio</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-gray-200 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                        <option value="#introduccion">Introducci칩n</option>
                        <option value="#indices">칈ndices</option>
                        <option value="#determinantes">Determinantes</option>
                        <option value="#modelos">Modelos</option>
                        <option value="#desafios">Desaf칤os</option>
                        <option value="#casos">Casos de Estudio</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        
        <section id="introduccion" class="mb-20 text-center">
            <h2 class="text-3xl font-bold mb-4 text-[#6D8A96]">쯈u칠 es el Comercio Intraindustrial?</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-8">
                El comercio intraindustrial (CII) es el intercambio de productos similares que pertenecen a la misma industria. Piense en Alemania exportando BMWs a Francia, mientras Francia exporta Peugeots a Alemania. Este fen칩meno, crucial en el comercio moderno, contrasta con el comercio interindustrial tradicional, donde se intercambian productos de diferentes industrias.
            </p>
            <div class="flex flex-col md:flex-row justify-center gap-8">
                <div class="card p-6 w-full md:w-1/2">
                    <h3 class="text-2xl font-semibold mb-3">Comercio <span class="text-red-500">INTER</span>-industrial</h3>
                    <p class="mb-4">Basado en ventajas comparativas. Un pa칤s exporta lo que produce eficientemente e importa lo que no.</p>
                    <div class="flex items-center justify-around text-4xl">
                        <span>游뻟릖 驕됊잺</span>
                        <span class="text-2xl font-mono text-red-500">&lrarr;</span>
                        <span>游쥟릖 游눹</span>
                    </div>
                    <p class="mt-4 font-semibold">Ej: Colombia exporta caf칠 a EEUU e importa computadoras.</p>
                </div>
                <div class="card p-6 w-full md:w-1/2">
                    <h3 class="text-2xl font-semibold mb-3">Comercio <span class="text-green-500">INTRA</span>-industrial</h3>
                    <p class="mb-4">Basado en econom칤as de escala y diferenciaci칩n de productos.</p>
                     <div class="flex items-center justify-around text-4xl">
                        <span>游뾇릖 游뚱</span>
                        <span class="text-2xl font-mono text-green-500">&lrarr;</span>
                        <span>游游 游뚳</span>
                    </div>
                    <p class="mt-4 font-semibold">Ej: Alemania y Francia intercambian autom칩viles de diferentes marcas.</p>
                </div>
            </div>
        </section>

        <section id="indices" class="mb-20">
            <h2 class="text-3xl font-bold mb-8 text-center text-[#6D8A96]">쮺칩mo se Mide el Comercio Intraindustrial?</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12 text-center">
                Para cuantificar este fen칩meno, los economistas utilizan principalmente el 칈ndice de Grubel-Lloyd (GL). Este 칤ndice nos dice qu칠 porci칩n del comercio total es intraindustrial. Explore su funcionamiento de manera interactiva a continuaci칩n.
            </p>
            <div class="card p-6 md:p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-2xl font-semibold mb-4">칈ndice de Grubel-Lloyd (GL)</h3>
                        <p class="mb-4">La f칩rmula calcula la proporci칩n del comercio que no es interindustrial. Un valor cercano a 1 indica un alto nivel de comercio intraindustrial, mientras que un valor cercano a 0 significa que predomina el comercio interindustrial.</p>
                        <div class="bg-gray-100 p-4 rounded-lg text-center font-mono text-sm md:text-base mb-6">
                            GL<sub>i</sub> = 1 - [ |X<sub>i</sub> - M<sub>i</sub>| / (X<sub>i</sub> + M<sub>i</sub>) ]
                        </div>
                        <label for="gl-slider" class="block mb-2 font-semibold">Simulador de 칈ndice GL:</label>
                        <input id="gl-slider" type="range" min="0" max="1" step="0.01" value="0.75" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-sm mt-1">
                            <span>0 (Interindustrial)</span>
                            <span>1 (Intraindustrial)</span>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="chart-container">
                            <canvas id="gl-chart"></canvas>
                        </div>
                        <p id="gl-text" class="mt-4 text-lg font-semibold"></p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="determinantes" class="mb-20">
            <h2 class="text-3xl font-bold mb-8 text-center text-[#6D8A96]">쯈u칠 Impulsa el Comercio Intraindustrial?</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12 text-center">
                Diversos factores a nivel de pa칤s e industria explican la existencia y la intensidad del CII. El siguiente gr치fico de burbujas muestra los determinantes clave. Haga clic en cada burbuja para obtener m치s detalles sobre su impacto.
            </p>
            <div class="card p-6 md:p-8">
                <div id="determinants-chart-container" class="w-full h-[500px] relative">
                    <canvas id="determinants-chart"></canvas>
                </div>
            </div>
            <div id="determinant-details" class="mt-6 p-6 bg-white rounded-lg border border-gray-200" style="display: none;">
                <h3 id="details-title" class="text-xl font-bold mb-2"></h3>
                <p id="details-text"></p>
            </div>
        </section>
        
        <section id="modelos" class="mb-20">
            <h2 class="text-3xl font-bold mb-8 text-center text-[#6D8A96]">쮺칩mo se Estima y Analiza?</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12 text-center">
                Para establecer los determinantes del CII, los economistas emplean modelos econom칠tricos. Los m치s comunes son los modelos de gravedad y los an치lisis con datos de panel, que permiten controlar por una gran cantidad de variables.
            </p>
            <div class="card p-6 md:p-8">
                <div class="flex border-b border-gray-200 mb-6">
                    <button class="tab-button flex-1 py-2 px-4 font-semibold text-gray-600 active" data-tab="gravedad">Modelo de Gravedad</button>
                    <button class="tab-button flex-1 py-2 px-4 font-semibold text-gray-600" data-tab="panel">Datos de Panel</button>
                </div>
                <div id="gravedad-content" class="tab-content">
                    <h3 class="text-2xl font-semibold mb-3">El Modelo de Gravedad</h3>
                    <p class="mb-4">Inspirado en la ley de Newton, este modelo es el pilar del an치lisis comercial. Postula que el comercio entre dos pa칤ses es directamente proporcional al tama침o de sus econom칤as (usualmente medido por el PIB) e inversamente proporcional a la distancia entre ellos. Es el punto de partida para analizar los determinantes del CII.</p>
                    <div class="bg-gray-100 p-4 rounded-lg text-center font-mono text-sm md:text-base">
                        CII<sub>ij</sub> = f(PIB<sub>i</sub>, PIB<sub>j</sub>, Distancia<sub>ij</sub>, Otros Factores)
                    </div>
                </div>
                <div id="panel-content" class="tab-content hidden">
                    <h3 class="text-2xl font-semibold mb-3">El Poder de los Datos de Panel</h3>
                    <p class="mb-4">Los datos de panel (que combinan series de tiempo con datos de corte transversal para m칰ltiples pa칤ses/industrias a lo largo del tiempo) son extremadamente 칰tiles. Permiten controlar por caracter칤sticas inobservables que no cambian en el tiempo (como la cultura o la geograf칤a) mediante "efectos fijos". Esto ayuda a aislar de manera m치s precisa el impacto de las variables de inter칠s sobre el CII.</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Modelos Est치ticos:</strong> Efectos fijos y aleatorios.</li>
                        <li><strong>Modelos Din치micos (GMM):</strong> Tienen en cuenta que el comercio pasado puede influir en el comercio presente, abordando problemas de persistencia.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="desafios" class="mb-20">
            <h2 class="text-3xl font-bold mb-8 text-center text-[#6D8A96]">Desaf칤os en la Estimaci칩n y sus Soluciones</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12 text-center">
                Estimar los determinantes del CII no est치 exento de dificultades econom칠tricas. Afortunadamente, se han desarrollado m칠todos para abordar estos problemas. Haga clic en cada tarjeta para ver el problema y su soluci칩n.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="problem-card card" data-problem="ceros">
                    <div class="p-6 problem">
                        <h3 class="text-xl font-bold mb-3">Problema de los Ceros</h3>
                        <p>Cuando no hay comercio entre dos pa칤ses en una industria, el valor es cero. Los modelos de gravedad tradicionales usan logaritmos, y log(0) no est치 definido. Ignorar estos ceros crea un sesgo de selecci칩n.</p>
                        <button class="mt-4 text-[#6D8A96] font-semibold">Ver Soluci칩n &rarr;</button>
                    </div>
                    <div class="p-6 solution">
                        <h3 class="text-xl font-bold mb-3">Soluci칩n: PPML</h3>
                        <p>El estimador de Poisson Pseudo-M치xima Verosimilitud (PPML) de Santos Silva & Tenreyro (2006) es la soluci칩n est치ndar. No requiere logaritmos, por lo que maneja los ceros de forma natural y es robusto a la heterocedasticidad.</p>
                        <button class="mt-4 text-[#6D8A96] font-semibold">&larr; Ver Problema</button>
                    </div>
                </div>
                <div class="problem-card card" data-problem="endogeneidad">
                     <div class="p-6 problem">
                        <h3 class="text-xl font-bold mb-3">Endogeneidad</h3>
                        <p>Puede haber causalidad inversa. Por ejemplo, 쯧n acuerdo comercial aumenta el CII, o un alto CII impulsa la firma del acuerdo? Si es as칤, las estimaciones de MCO son sesgadas.</p>
                        <button class="mt-4 text-[#6D8A96] font-semibold">Ver Soluci칩n &rarr;</button>
                    </div>
                    <div class="p-6 solution">
                        <h3 class="text-xl font-bold mb-3">Soluci칩n: IV y GMM</h3>
                        <p>Se utilizan Variables Instrumentales (IV) o estimadores de panel din치micos como el GMM (M칠todo Generalizado de los Momentos), que usan valores rezagados de las variables como instrumentos para corregir la endogeneidad.</p>
                        <button class="mt-4 text-[#6D8A96] font-semibold">&larr; Ver Problema</button>
                    </div>
                </div>
                <div class="problem-card card" data-problem="heterocedasticidad">
                     <div class="p-6 problem">
                        <h3 class="text-xl font-bold mb-3">Heterocedasticidad</h3>
                        <p>La varianza de los errores del modelo no es constante. En los modelos de comercio, los flujos comerciales de pa칤ses grandes tienden a tener m치s varianza que los de pa칤ses peque침os. Esto afecta la eficiencia de las estimaciones.</p>
                        <button class="mt-4 text-[#6D8A96] font-semibold">Ver Soluci칩n &rarr;</button>
                    </div>
                    <div class="p-6 solution">
                        <h3 class="text-xl font-bold mb-3">Soluci칩n: Errores y PPML</h3>
                        <p>Se pueden usar errores est치ndar robustos. Sin embargo, el estimador PPML tambi칠n es inherentemente robusto a la presencia de heterocedasticidad, lo que lo convierte en una soluci칩n integral para m칰ltiples problemas.</p>
                        <button class="mt-4 text-[#6D8A96] font-semibold">&larr; Ver Problema</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="casos" class="mb-12">
            <h2 class="text-3xl font-bold mb-8 text-center text-[#6D8A96]">Casos de Estudio Relevantes</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12 text-center">
                El comercio intraindustrial es un fen칩meno global con manifestaciones interesantes en diferentes regiones. Aqu칤 se presentan algunos casos emblem치ticos que ilustran la teor칤a en la pr치ctica.
            </p>
            <div class="space-y-6">
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold mb-3">游쥟릖젏릖쓇릖쬃릖뻟릖 NAFTA/T-MEC y el Sector Automotriz</h3>
                    <p class="text-gray-700">El acuerdo de libre comercio en Am칠rica del Norte gener칩 un alt칤simo nivel de CII, especialmente en la industria automotriz. Es un caso cl치sico de <strong>comercio intraindustrial vertical</strong>, donde diferentes etapas del proceso de producci칩n se localizan en diferentes pa칤ses (dise침o en EEUU, ensamblaje en M칠xico, partes en Canad치) creando cadenas de valor integradas. Los componentes cruzan las fronteras m칰ltiples veces antes de que el veh칤culo final sea vendido.</p>
                </div>
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold mb-3">游쀯릖 La Uni칩n Europea y la Diferenciaci칩n de Productos</h3>
                    <p class="text-gray-700">El mercado 칰nico europeo es quiz치s el mejor ejemplo de <strong>comercio intraindustrial horizontal</strong>. La eliminaci칩n de barreras comerciales y la convergencia de ingresos llevaron a un intercambio masivo de bienes similares pero diferenciados por marca, calidad o dise침o. Los consumidores europeos tienen acceso a una vasta gama de productos de todos los pa칤ses miembros, como autos, quesos, vinos y productos farmac칠uticos, fomentando la competencia y la especializaci칩n a nivel de empresa.</p>
                </div>
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold mb-3">游뻟릖 Chile y su Integraci칩n con Asia</h3>
                    <p class="text-gray-700">El caso de Chile es interesante por su estrategia de apertura comercial a trav칠s de numerosos tratados de libre comercio, incluyendo con potencias asi치ticas como China, Jap칩n y Corea del Sur. Estudios han mostrado que, si bien el comercio con Asia sigue dominado por el patr칩n interindustrial (Chile exporta materias primas como cobre e importa manufacturas), ha habido un crecimiento del CII en sectores espec칤ficos como alimentos procesados (salm칩n, vino) y algunos qu칤micos, demostrando c칩mo la liberalizaci칩n puede diversificar los patrones comerciales incluso en econom칤as especializadas en recursos naturales.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white mt-20">
        <div class="container mx-auto px-6 py-4 text-center">
            <p>&copy; 2025 Explorador de Comercio Intraindustrial. Creado con fines educativos.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const glSlider = document.getElementById('gl-slider');
            const glText = document.getElementById('gl-text');
            const glCtx = document.getElementById('gl-chart').getContext('2d');
            let glChart;

            function updateGlChart(value) {
                const percentage = (value * 100).toFixed(0);
                const data = {
                    labels: ['Intraindustrial', 'Interindustrial'],
                    datasets: [{
                        data: [value, 1 - value],
                        backgroundColor: ['#6D8A96', '#D2B48C'],
                        borderColor: '#FDFBF7',
                        borderWidth: 4,
                    }]
                };
                if (glChart) {
                    glChart.data = data;
                    glChart.update();
                } else {
                    glChart = new Chart(glCtx, {
                        type: 'doughnut',
                        data: data,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `${context.label}: ${(context.raw * 100).toFixed(0)}%`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                glText.textContent = `칈ndice GL = ${value.toFixed(2)}. El ${percentage}% del comercio es intraindustrial.`;
            }

            glSlider.addEventListener('input', (e) => {
                updateGlChart(parseFloat(e.target.value));
            });

            updateGlChart(parseFloat(glSlider.value));

            const determinantsData = {
                datasets: [{
                    label: 'Determinantes del CII',
                    data: [
                        { x: 2, y: 7, r: 28, label: 'Diferenciaci칩n de Productos' },
                        { x: 7, y: 8, r: 25, label: 'Similitud de Ingresos' },
                        { x: 8, y: 3, r: 22, label: 'Tama침o del Mercado' },
                        { x: 3, y: 2, r: 20, label: 'Econom칤as de Escala' },
                        { x: 5, y: 5, r: 18, label: 'Apertura Comercial' },
                        { x: 9, y: 6, r: 15, label: 'Inversi칩n Extranjera (IED)' },
                        { x: 1, y: 4, r: 12, label: 'Baja Distancia Geogr치fica' }
                    ],
                    backgroundColor: '#6D8A96',
                    hoverBackgroundColor: '#57727c'
                }]
            };

            const determinantsDetails = {
                'Diferenciaci칩n de Productos': 'Es el motor principal. Permite que pa칤ses intercambien variedades de un mismo producto (ej. autos de diferentes marcas). Puede ser horizontal (diferente dise침o) o vertical (diferente calidad).',
                'Similitud de Ingresos': 'Pa칤ses con niveles de PIB per c치pita similares tienden a tener patrones de demanda parecidos, lo que fomenta el intercambio de productos diferenciados para satisfacer gustos variados.',
                'Tama침o del Mercado': 'Mercados m치s grandes (medidos por el PIB) permiten a las empresas aprovechar mejor las econom칤as de escala y ofrecer una mayor variedad de productos, lo que estimula el CII.',
                'Econom칤as de Escala': 'Cuando el costo por unidad disminuye al aumentar la producci칩n, las empresas se especializan en variedades espec칤ficas de un producto para exportar, mientras el pa칤s importa otras variedades.',
                'Apertura Comercial': 'La reducci칩n de aranceles y barreras no arancelarias facilita el intercambio de bienes, incluyendo los de la misma industria. Los acuerdos comerciales son un gran impulsor.',
                'Inversi칩n Extranjera (IED)': 'La IED, especialmente la vertical, crea cadenas de valor transfronterizas. Una multinacional puede producir componentes en un pa칤s y ensamblarlos en otro, generando un alto CII.',
                'Baja Distancia Geogr치fica': 'Menores costos de transporte facilitan el comercio en general, incluido el CII. Compartir una frontera es un factor muy importante.'
            };
            
            const detailsContainer = document.getElementById('determinant-details');
            const detailsTitle = document.getElementById('details-title');
            const detailsText = document.getElementById('details-text');
            
            const determinantsCtx = document.getElementById('determinants-chart').getContext('2d');
            new Chart(determinantsCtx, {
                type: 'bubble',
                data: determinantsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    return context.raw.label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    },
                    onClick: (e, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const label = determinantsData.datasets[0].data[index].label;
                            detailsTitle.textContent = label;
                            detailsText.textContent = determinantsDetails[label];
                            detailsContainer.style.display = 'block';
                            detailsContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }
                }
            });

            const tabs = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    tabContents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(tab.dataset.tab + '-content').classList.remove('hidden');
                });
            });

            const problemCards = document.querySelectorAll('.problem-card');
            problemCards.forEach(card => {
                card.addEventListener('click', () => {
                    card.classList.toggle('flipped');
                });
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileNav = document.getElementById('mobile-nav');

            function setActiveLink() {
                let current = '';
                const sections = document.querySelectorAll('section');
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active');
                    }
                });
                if(mobileNav.value !== `#${current}`){
                    mobileNav.value = `#${current}`;
                }
            }
            
            mobileNav.addEventListener('change', (e) => {
                window.location.hash = e.target.value;
            });

            window.addEventListener('scroll', setActiveLink);
            setActiveLink();
        });
    </script>
</body>
</html>
